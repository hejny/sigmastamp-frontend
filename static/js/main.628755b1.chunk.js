(this["webpackJsonpsigmaverse-hackathon-frontend"]=this["webpackJsonpsigmaverse-hackathon-frontend"]||[]).push([[0],{116:function(e,t){},118:function(e,t){},159:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var r,a=n(9),c=n(96),s=n(0),i=n.n(s),o=n(89),u=n.n(o),l=n(5),p=n(10),f=n(32),d=n(24),h=n(2),b=n.n(h),j=n(4),m=n(15),v=n(90),O=n(40),x=n.n(O),g=n(29),y=n(1);function w(){return Object(y.jsx)(T,{children:Object(y.jsx)("div",{className:"spinner"})})}var k,T=p.a.div(r||(r=Object(a.a)([""])));function S(e){var t=e.loading,n=e.content,r=s.useState({content:t||Object(y.jsx)(w,{})}),a=Object(m.a)(r,2),c=a[0],i=a[1];return s.useEffect((function(){return Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,"function"===typeof(t=n)?t():t;case 3:e.t1=e.sent,e.t2={content:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}var t}),e)})))(),function(){}}),[n]),Object(y.jsx)(y.Fragment,{children:c.content})}function U(e){var t=e.amount,n=e.address,r=e.dueTime;return Object(y.jsxs)(F,{children:["Pay ",t," ERG to address ",n," in $",r," seconds."]})}var P,F=p.a.div(k||(k=Object(a.a)([""]))),I=n(94);function D(e){var t=Object(s.useRef)(null);return Object(y.jsxs)("div",{children:[e.createUi({createPdf:function(){var e=Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new I.a).text(t.current.innerText,10,10),e.abrupt("return",n.output("blob"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Object(y.jsx)(N,{ref:t,children:e.children})]})}var E,N=p.a.div(P||(P=Object(a.a)(["\n    width: ","px;\n    height: ","px;\n    border: 2px solid #009edf;\n\n    background-color: white;\n    color: black;\n"])),420,594),B=n(11),C=n(18),A=n(20),H=n(19),R=function(e){Object(A.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(B.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={fileInputField:null},e}return Object(C.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.onFiles,a=t.onFilesOver,c=t.clickable,s=function(e){a&&a(e)};return Object(y.jsxs)(L,{onClick:function(){c&&e()},onDragEnter:function(e){e.stopPropagation(),e.preventDefault()},onDragOver:function(e){e.stopPropagation(),e.preventDefault(),s(!0)},onDragExit:function(e){e.stopPropagation(),e.preventDefault(),s(!1)},onDragEnd:function(e){e.stopPropagation(),e.preventDefault()},onDrop:function(e){e.preventDefault(),e.stopPropagation(),s(!1);var t=Array.from(e.dataTransfer.files);r(t)},children:[Object(y.jsx)("input",{type:"file",ref:function(t){t&&(e=function(){s(!0),t.click()})},onChange:function(e){e&&e.target&&e.target.files&&r(Array.from(e.target.files))}}),n]})}}]),n}(s.Component),L=p.a.div(E||(E=Object(a.a)(["\n    width: ","px;\n    height: ","px;\n    padding: 10px;\n    border: 5px dashed #009edf;\n\n    input {\n        display: none;\n    }\n"])),210,297),M=n(43);function G(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("loadend",(function(e){return t(e.target.result)})),r.addEventListener("error",n),r.readAsArrayBuffer(e)}))}function W(e){return _.apply(this,arguments)}function _(){return(_=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,G(t);case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=n(97);function K(e){return Object(z.a)(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function q(e){return J.apply(this,arguments)}function J(){return(J=Object(j.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null,32,n=Object(M.blake2bInit)(32,null),e.t0=M.blake2bUpdate,e.t1=n,e.next=7,W(t);case 7:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),r=Object(M.blake2bFinal)(n),a=K(r),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V,Y=function(){function e(){Object(B.a)(this,e),this.name=void 0,this.title=void 0,this.dataTitles={hash:"Current block hash"},this.ttl=-1}return Object(C.a)(e,[{key:"getData",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.blockcypher.com/v1/".concat(this.name.toLowerCase(),"/main"));case 2:return t=e.sent,console.log({response:t}),e.next=6,t.json();case 6:if(!(n=e.sent).error){e.next=9;break}throw new Error(n.error);case 9:return r=n.hash,e.abrupt("return",{hash:r});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Q=function(e){Object(A.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(B.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="BTC",e.title="Bitcoin",e}return n}(Y),Z=function(){function e(){Object(B.a)(this,e),this.name="DATE",this.title="Current",this.ttl=1,this.dataTitles={date:"date",time:"time"}}return Object(C.a)(e,[{key:"getData",value:function(){var e=new Date;return{date:"".concat(e.getUTCFullYear(),"-").concat(("0"+e.getUTCMonth()).slice(-2),"-").concat(("0"+e.getUTCDate()).slice(-2)),time:"".concat(("0"+e.getUTCHours()).slice(-2),":").concat(("0"+e.getUTCMinutes()).slice(-2),":").concat(("0"+e.getUTCSeconds()).slice(-2))}}}]),e}(),$=function(e){Object(A.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(B.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="ETH",e.title="Ethereum",e}return n}(Y),X=function(e){Object(A.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(B.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).name="LTC",e.title="Litecoin",e}return n}(Y),ee=n(95),te=n.n(ee),ne=function(){function e(){Object(B.a)(this,e),this.name="NYTIMES",this.title="The New York Times",this.ttl=-1,this.dataTitles={firstTitle:"first title"}}return Object(C.a)(e,[{key:"getData",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new te.a,e.next=3,t.parseURL("https://rss.nytimes.com/services/xml/rss/nyt/World.xml");case 3:return n=e.sent,e.abrupt("return",{firstTitle:n.items[0].title});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(j.a)(b.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,p,f,d,h,m,v,O,x,g,y,w,k,T,S,U;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.userAddress,r=t.documentHashInBase64,a=t.documentHashInHex,e.next=3;break;case 3:return c=2e7,s=1e8,i=1e8,o="3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV",u="Ad4=",l=1e7,p="3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV",e.next=12,re();case 12:return e.t0=e.sent,f=e.t0+10,d="\n{\n\n    val sigmaStampNftIssuanceOK = {\n        \n        val assetType = OUTPUTS(0).R7[Coll[Byte]].get\n        val stampedDocHash = OUTPUTS(0).R8[Coll[Byte]].get\n        val issued = OUTPUTS(0).tokens.getOrElse(0, (INPUTS(0).id, 0L))\n\n        INPUTS(0).id == issued._1 && issued._2 == 1 &&\n        OUTPUTS(0).value == ".concat(s,'L &&\n\n        OUTPUTS(0).propositionBytes == PK("').concat(n,'").propBytes &&\n        OUTPUTS(1).value == ').concat(i,'L &&\n\n        OUTPUTS(1).propositionBytes == PK("').concat(o,'").propBytes &&\n        assetType == fromBase64("').concat(u,'") &&\n        stampedDocHash == fromBase64("').concat(r,'") &&\n        OUTPUTS.size == 3\n\n    }\n\n    val returnFunds = {\n\n        val total_without_fee = INPUTS.fold(0L, {(x:Long, b:Box) => x + b.value}) - ').concat(l,'L\n\n        OUTPUTS(0).value >= total_without_fee &&\n        OUTPUTS(0).propositionBytes == PK("').concat(n,'").propBytes &&\n        (PK("').concat(p,'") || HEIGHT > ').concat(f,") &&\n        OUTPUTS.size == 2\n\n    }\n\n    sigmaProp(sigmaStampNftIssuanceOK || returnFunds)\n\n}\n    "),h=JSON.stringify(d.trim()).split("^\n").join("\n").split("\n\n").join("\n"),e.next=18,fetch("http://assembler.sigmastamp.ml:14747/compile",{method:"POST",body:h,headers:{"Content-Type":"application/json"}});case 18:return m=e.sent,e.next=21,m.json();case 21:return v=e.sent,O=v.address,x=s+i+c,g="e20".concat(a),y="0e61".concat("http://sigmastamp.ml/verify?hash=a16d5705c031866f5c5dd1ba39e43538193b45718af5a50a115e1c8d67c209cd"),w={address:O,returnTo:n,startWhen:{erg:x},txSpec:{requests:[{ergValue:s,address:n,name:"SigmaStampNFT",amount:1,decimals:0,description:"Proof of existence of document with Blake2b-256 hash specified in R8 register during minting of this NFT token.",registers:{R7:"0e0201de",R8:g,R9:y}},{value:i,address:o}],fee:c,inputs:["$userIns"],dataInputs:[]}},e.next=29,fetch("http://assembler.sigmastamp.ml:14747/follow",{method:"POST",body:JSON.stringify(w)});case 29:return k=e.sent,e.next=32,k.json();case 32:return T=e.sent,S=T.id,U=T.dueTime,e.abrupt("return",{amount:x/1e9,address:v.address,dueTime:U,getStatus:function(){return Object(j.a)(b.a.mark((function e(){var t,n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fetch("http://assembler.sigmastamp.ml:14747/result/".concat(S)),e.next=3,k.json();case 3:if(n=e.sent,r=T.tx,a=T.detail,console.log({watchResponse:t,watchResponseBody:n,tx:r}),"success"!==a){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))()}});case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=[new Q,new $,new X,new Z,new ne];function oe(){var e=Object(s.useState)({files:[]}),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(null),c=Object(m.a)(a,2),i=c[0],o=c[1];return i?Object(y.jsx)(U,Object(f.a)({},i)):Object(y.jsxs)(le,{children:[0===n.files.length?Object(y.jsx)(R,{onFiles:function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({files:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),clickable:!0,children:"Upload your file(s) here!"}):Object(y.jsxs)(D,{createUi:function(e){var t=e.createPdf;return Object(y.jsx)("button",{onClick:Object(j.a)(b.a.mark((function e(){var r,a,c,s,i,u,l,p,f;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=File,e.next=3,t();case 3:e.t1=e.sent,e.t2=[e.t1],r=new e.t0(e.t2,"certificate1.pdf"),a=new x.a,c=Object(d.a)(n.files);try{for(c.s();!(s=c.n()).done;)i=s.value,a.file(i.name,i)}catch(h){c.e(h)}finally{c.f()}return a.file(r.name,r),e.next=12,a.generateAsync({type:"blob"});case 12:return u=e.sent,e.next=15,q(u);case 15:if(l=e.sent,Object(v.saveAs)(u,"certificate1.".concat(l.substring(0,5),".zip")),p=prompt("Please fill your Ergo address","3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV")){e.next=20;break}return e.abrupt("return");case 20:return e.next=22,ce({userAddress:p,documentHashInBase64:l,documentHashInHex:l});case 22:f=e.sent,o(f);case 24:case"end":return e.stop()}}),e)}))),children:"Download 1st certificate"})},children:[n.files.map((function(e){return Object(y.jsx)(S,{content:Object(j.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(e);case 2:return n=t.sent,t.abrupt("return",Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("b",{children:["Hash of ",e.name]})," is ",n]}));case 4:case"end":return t.stop()}}),t)})))},e.name)})),ie.map((function(e){return Object(y.jsx)("div",{children:Object(y.jsx)(S,{content:Object(j.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return n=t.sent,t.abrupt("return",Object(y.jsx)(y.Fragment,{children:Object.entries(n).map((function(t){var n=Object(m.a)(t,2),r=n[0],a=n[1];return Object(y.jsxs)("div",{children:[Object(y.jsxs)("b",{children:[e.title,e.dataTitles[r],":"]}),a]},r)}))}));case 4:case"end":return t.stop()}}),t)})))})},e.name)}))]}),Object(y.jsx)(g.a,{to:"/verify",target:"_blank",children:"Or verify your 1st certificate."})]})}var ue,le=p.a.div(V||(V=Object(a.a)(["\n    a {\n        color: #555;\n        font-size: 0.7em;\n    }\n"])));n(159);function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(j.a)(b.a.mark((function e(t){var n,r,a,c,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api-testnet.ergoplatform.com/api/v0/assets/issuingBoxes");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.next=8,q(t);case 8:a=e.sent,c=Object(d.a)(r.items),e.prev=10,c.s();case 12:if((s=c.n()).done){e.next=18;break}if((i=s.value).additionalRegisters.R8!=="0e20".concat(a)){e.next=16;break}return e.abrupt("return",i);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[10,20,23,26]])})))).apply(this,arguments)}function de(e){return he.apply(this,arguments)}function he(){return(he=Object(j.a)(b.a.mark((function e(t){var n,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api-testnet.ergoplatform.com/api/v0/transactions/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,console.log("getTransactionTime",r),a=r.summary.timestamp,c=r.outputs[0].assets[0].tokenId,e.abrupt("return",{timestamp:a,tokenId:c});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return je.apply(this,arguments)}function je(){return(je=Object(j.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api-testnet.ergoplatform.com/api/v0/addresses/assetHolders/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,console.log("getAssetHolders",r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){var e=Object(s.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(null),c=Object(m.a)(a,2),i=c[0],o=c[1];return i?Object(y.jsxs)(D,{createUi:function(e){var t=e.createPdf;return Object(y.jsx)("button",{onClick:Object(j.a)(b.a.mark((function e(){var r,a,c,s,i,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=File,e.next=3,t();case 3:e.t1=e.sent,e.t2=[e.t1],r=new e.t0(e.t2,"certificate2.pdf"),a=new x.a,c=Object(d.a)(n);try{for(c.s();!(s=c.n()).done;)i=s.value,a.file(i.name,i)}catch(l){c.e(l)}finally{c.f()}return a.file(r.name,r),e.next=12,a.generateAsync({type:"blob"});case 12:return o=e.sent,e.next=15,q(o);case 15:u=e.sent,saveAs(o,"certificate2.".concat(u.substring(0,5),".zip"));case 17:case"end":return e.stop()}}),e)}))),children:"Download 2nd certificate"})},children:[Object(y.jsx)("b",{children:"txId:"})," ",i.txId,Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"timestamp:"})," ",i.timestamp,Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"tokenId:"})," ",i.tokenId,Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"hodlers:"})," ",i.hodlers.join(", ")]}):Object(y.jsxs)(Oe,{children:[Object(y.jsx)(R,{onFiles:function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a,c,s,i,u,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0],r([t[0]]),e.next=4,pe(n);case 4:return(a=e.sent)||alert("Your 1st certificate is still not validated through Ergo blockchain."),c=a.txId,e.next=9,de(c);case 9:return s=e.sent,i=s.timestamp,u=s.tokenId,e.next=14,be(u);case 14:l=e.sent,o(Object(f.a)(Object(f.a)({},a),{},{timestamp:i,tokenId:u,hodlers:l})),console.log(a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),clickable:!0,children:"Upload your 1st certificate."}),Object(y.jsx)(g.a,{to:"/",target:"_blank",children:"Or create your 1st certificate."})]})}var ve,Oe=p.a.div(ue||(ue=Object(a.a)(["\n    a {\n        color: #555;\n        font-size: 0.7em;\n    }\n"]))),xe=Object(c.a)(),ge=p.a.header(ve||(ve=Object(a.a)(["\n    h1 {\n        font-size: 1em;\n    }\n"])));u.a.render(Object(y.jsxs)(i.a.StrictMode,{children:[Object(y.jsx)(ge,{children:Object(y.jsx)("h1",{children:"\ud83d\udcdc Sigmastamp"})}),Object(y.jsx)(l.b,{history:xe,children:Object(y.jsxs)(l.c,{children:[Object(y.jsx)(l.a,{exact:!0,path:"/",children:Object(y.jsx)(oe,{})}),Object(y.jsx)(l.a,{exact:!0,path:"/verify",children:Object(y.jsx)(me,{})})]})})]}),document.getElementById("root"))}},[[160,1,3]]]);
//# sourceMappingURL=main.628755b1.chunk.js.map