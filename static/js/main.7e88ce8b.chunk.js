(this["webpackJsonpsigmaverse-hackathon-frontend"]=this["webpackJsonpsigmaverse-hackathon-frontend"]||[]).push([[0],{116:function(t,e){},118:function(t,e){},159:function(t,e,n){},160:function(t,e,n){"use strict";n.r(e);var r,a,c=n(89),s=n.n(c),i=n(12),o=n(32),u=n(24),l=n(2),p=n.n(l),f=n(4),d=n(15),h=n(0),b=n.n(h),j=n(9),v=n(18),m=n(20),O=n(19),x=n(13),y=n(1),g=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;Object(j.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={fileInputField:null},t}return Object(v.a)(n,[{key:"render",value:function(){var t,e=this.props,n=e.children,r=e.onFiles,a=e.onFilesOver,c=e.clickable,s=function(t){a&&a(t)};return Object(y.jsxs)(w,{onClick:function(){c&&t()},onDragEnter:function(t){t.stopPropagation(),t.preventDefault()},onDragOver:function(t){t.stopPropagation(),t.preventDefault(),s(!0)},onDragExit:function(t){t.stopPropagation(),t.preventDefault(),s(!1)},onDragEnd:function(t){t.stopPropagation(),t.preventDefault()},onDrop:function(t){t.preventDefault(),t.stopPropagation(),s(!1);var e=Array.from(t.dataTransfer.files);r(e)},children:[Object(y.jsx)("input",{type:"file",ref:function(e){e&&(t=function(){s(!0),e.click()})},onChange:function(t){t&&t.target&&t.target.files&&r(Array.from(t.target.files))}}),n]})}}]),n}(h.Component),w=x.a.div(r||(r=Object(i.a)(["\n    width: ","px;\n    height: ","px;\n    padding: 10px;\n    border: 5px dashed #009edf;\n\n    input {\n        display: none;\n    }\n"])),210,297),k=n(40),T=n.n(k),S=n(93);function U(){return Object(y.jsx)(P,{children:Object(y.jsx)("div",{className:"spinner"})})}var P=x.a.div(a||(a=Object(i.a)(["\n\n"])));function F(t){var e=t.loading,n=t.content,r=h.useState({content:e||Object(y.jsx)(U,{})}),a=Object(d.a)(r,2),c=a[0],s=a[1];return h.useEffect((function(){return Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,"function"===typeof(e=n)?e():e;case 3:t.t1=t.sent,t.t2={content:t.t1},(0,t.t0)(t.t2);case 6:case"end":return t.stop()}var e}),t)})))(),function(){}}),[n]),Object(y.jsx)(y.Fragment,{children:c.content})}var I=function(){function t(){Object(j.a)(this,t),this.name=void 0,this.title=void 0,this.dataTitles={hash:"Current block hash"},this.ttl=-1}return Object(v.a)(t,[{key:"getData",value:function(){var t=Object(f.a)(p.a.mark((function t(){var e,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.blockcypher.com/v1/".concat(this.name.toLowerCase(),"/main"));case 2:return e=t.sent,console.log({response:e}),t.next=6,e.json();case 6:if(!(n=t.sent).error){t.next=9;break}throw new Error(n.error);case 9:return r=n.hash,t.abrupt("return",{hash:r});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),E=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;Object(j.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).name="BTC",t.title="Bitcoin",t}return n}(I),D=n(43);function C(t){return new Promise((function(e,n){var r=new FileReader;r.addEventListener("loadend",(function(t){return e(t.target.result)})),r.addEventListener("error",n),r.readAsArrayBuffer(t)}))}function N(t){return B.apply(this,arguments)}function B(){return(B=Object(f.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,C(e);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=n(97);function H(t){return Object(A.a)(t).map((function(t){return t.toString(16).padStart(2,"0")})).join("")}function L(t){return R.apply(this,arguments)}function R(){return(R=Object(f.a)(p.a.mark((function t(e){var n,r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null,32,n=Object(D.blake2bInit)(32,null),t.t0=D.blake2bUpdate,t.t1=n,t.next=7,N(e);case 7:return t.t2=t.sent,(0,t.t0)(t.t1,t.t2),r=Object(D.blake2bFinal)(n),a=H(r),t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var M,G=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;Object(j.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).name="ETH",t.title="Ethereum",t}return n}(I),W=function(t){Object(m.a)(n,t);var e=Object(O.a)(n);function n(){var t;Object(j.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).name="LTC",t.title="Litecoin",t}return n}(I),_=function(){function t(){Object(j.a)(this,t),this.name="DATE",this.title="Current",this.ttl=1,this.dataTitles={date:"date",time:"time"}}return Object(v.a)(t,[{key:"getData",value:function(){var t=new Date;return{date:"".concat(t.getUTCFullYear(),"-").concat(("0"+t.getUTCMonth()).slice(-2),"-").concat(("0"+t.getUTCDate()).slice(-2)),time:"".concat(("0"+t.getUTCHours()).slice(-2),":").concat(("0"+t.getUTCMinutes()).slice(-2),":").concat(("0"+t.getUTCSeconds()).slice(-2))}}}]),t}(),z=n(94),K=n.n(z),q=function(){function t(){Object(j.a)(this,t),this.name="NYTIMES",this.title="The New York Times",this.ttl=-1,this.dataTitles={firstTitle:"first title"}}return Object(v.a)(t,[{key:"getData",value:function(){var t=Object(f.a)(p.a.mark((function t(){var e,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new K.a,t.next=3,e.parseURL("https://rss.nytimes.com/services/xml/rss/nyt/World.xml");case 3:return n=t.sent,t.abrupt("return",{firstTitle:n.items[0].title});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}(),J=n(95);function V(t){var e=Object(h.useRef)(null);return Object(y.jsxs)("div",{children:[t.createUi({createPdf:function(){var t=Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new J.a).text(e.current.innerText,10,10),t.abrupt("return",n.output("blob"));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),Object(y.jsx)(Q,{ref:e,children:t.children})]})}var Y,Q=x.a.div(M||(M=Object(i.a)(["\n    width: ","px;\n    height: ","px;\n    border: 2px solid #009edf;\n\n    background-color: white;\n    color: black;\n\n    button {\n    }\n"])),420,594);function Z(t){var e=t.amount,n=t.address,r=t.dueTime;return Object(y.jsxs)($,{children:["Pay ",e," ERG to address ",n," in $",r," seconds."]})}var $=x.a.div(Y||(Y=Object(i.a)([""])));function X(){return tt.apply(this,arguments)}function tt(){return(tt=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){return nt.apply(this,arguments)}function nt(){return(nt=Object(f.a)(p.a.mark((function t(e){var n,r,a,c,s,i,o,u,l,d,h,b,j,v,m,O,x,y,g,w,k,T,S,U;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.userAddress,r=e.documentHashInBase64,a=e.documentHashInHex,t.next=3;break;case 3:return c=2e7,s=1e8,i=1e8,o="3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV",u="Ad4=",l=1e7,d="3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV",t.next=12,X();case 12:return t.t0=t.sent,h=t.t0+10,b="\n{\n\n    val sigmaStampNftIssuanceOK = {\n        \n        val assetType = OUTPUTS(0).R7[Coll[Byte]].get\n        val stampedDocHash = OUTPUTS(0).R8[Coll[Byte]].get\n        val issued = OUTPUTS(0).tokens.getOrElse(0, (INPUTS(0).id, 0L))\n\n        INPUTS(0).id == issued._1 && issued._2 == 1 &&\n        OUTPUTS(0).value == ".concat(s,'L &&\n\n        OUTPUTS(0).propositionBytes == PK("').concat(n,'").propBytes &&\n        OUTPUTS(1).value == ').concat(i,'L &&\n\n        OUTPUTS(1).propositionBytes == PK("').concat(o,'").propBytes &&\n        assetType == fromBase64("').concat(u,'") &&\n        stampedDocHash == fromBase64("').concat(r,'") &&\n        OUTPUTS.size == 3\n\n    }\n\n    val returnFunds = {\n\n        val total_without_fee = INPUTS.fold(0L, {(x:Long, b:Box) => x + b.value}) - ').concat(l,'L\n\n        OUTPUTS(0).value >= total_without_fee &&\n        OUTPUTS(0).propositionBytes == PK("').concat(n,'").propBytes &&\n        (PK("').concat(d,'") || HEIGHT > ').concat(h,") &&\n        OUTPUTS.size == 2\n\n    }\n\n    sigmaProp(sigmaStampNftIssuanceOK || returnFunds)\n\n}\n    "),j=JSON.stringify(b.trim()).split("^\n").join("\n").split("\n\n").join("\n"),t.next=18,fetch("http://assembler.sigmastamp.ml:14747/compile",{method:"POST",body:j,headers:{"Content-Type":"application/json"}});case 18:return v=t.sent,t.next=21,v.json();case 21:return m=t.sent,O=m.address,x=s+i+c,y="e20".concat(a),g="0e61".concat("http://sigmastamp.ml/verify?hash=a16d5705c031866f5c5dd1ba39e43538193b45718af5a50a115e1c8d67c209cd"),w={address:O,returnTo:n,startWhen:{erg:x},txSpec:{requests:[{ergValue:s,address:n,name:"SigmaStampNFT",amount:1,decimals:0,description:"Proof of existence of document with Blake2b-256 hash specified in R8 register during minting of this NFT token.",registers:{R7:"0e0201de",R8:y,R9:g}},{value:i,address:o}],fee:c,inputs:["$userIns"],dataInputs:[]}},t.next=29,fetch("http://assembler.sigmastamp.ml:14747/follow",{method:"POST",body:JSON.stringify(w)});case 29:return k=t.sent,t.next=32,k.json();case 32:return T=t.sent,S=T.id,U=T.dueTime,t.abrupt("return",{amount:x/1e9,address:m.address,dueTime:U,getStatus:function(){return Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return fetch("http://assembler.sigmastamp.ml:14747/result/".concat(S)),t.next=3,k.json();case 3:if(t.sent,T.tx,"success"!==T.detail){t.next=7;break}return t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()}});case 35:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var rt,at=n(29),ct=[new E,new G,new W,new _,new q];function st(){var t=Object(h.useState)({files:[]}),e=Object(d.a)(t,2),n=e[0],r=e[1],a=Object(h.useState)(null),c=Object(d.a)(a,2),s=c[0],i=c[1];return s?Object(y.jsx)(Z,Object(o.a)({},s)):Object(y.jsxs)(ot,{children:[0===n.files.length?Object(y.jsx)(g,{onFiles:function(){var t=Object(f.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({files:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),clickable:!0,children:"Upload your file(s) here!"}):Object(y.jsxs)(V,{createUi:function(t){var e=t.createPdf;return Object(y.jsx)("button",{onClick:Object(f.a)(p.a.mark((function t(){var r,a,c,s,o,l,f,d,h;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=File,t.next=3,e();case 3:t.t1=t.sent,t.t2=[t.t1],r=new t.t0(t.t2,"certificate1.pdf"),a=new T.a,c=Object(u.a)(n.files);try{for(c.s();!(s=c.n()).done;)o=s.value,a.file(o.name,o)}catch(p){c.e(p)}finally{c.f()}return a.file(r.name,r),t.next=12,a.generateAsync({type:"blob"});case 12:return l=t.sent,t.next=15,L(l);case 15:if(f=t.sent,Object(S.saveAs)(l,"certificate1.".concat(f.substring(0,5),".zip")),d=prompt("Please fill your Ergo address","3Ww7y6vi4NhFZ1ufsEF8vQNyGrvhNmeMmDWP9h3s4qSEFSMoGooV")){t.next=20;break}return t.abrupt("return");case 20:return t.next=22,et({userAddress:d,documentHashInBase64:f,documentHashInHex:f});case 22:h=t.sent,i(h);case 24:case"end":return t.stop()}}),t)}))),children:"Create 1st certificate"})},children:[n.files.map((function(t){return Object(y.jsx)(F,{content:Object(f.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return n=e.sent,e.abrupt("return",Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("b",{children:["Hash of ",t.name]})," is ",n]}));case 4:case"end":return e.stop()}}),e)})))},t.name)})),ct.map((function(t){return Object(y.jsx)("div",{children:Object(y.jsx)(F,{content:Object(f.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:return n=e.sent,e.abrupt("return",Object(y.jsx)(y.Fragment,{children:Object.entries(n).map((function(e){var n=Object(d.a)(e,2),r=n[0],a=n[1];return Object(y.jsxs)("div",{children:[Object(y.jsxs)("b",{children:[t.title," ",t.dataTitles[r],":"]})," ",a]},r)}))}));case 4:case"end":return e.stop()}}),e)})))})},t.name)}))]}),Object(y.jsx)(at.a,{to:"/verify",target:"_blank",children:"Or verify your 1st certificate."})]})}var it,ot=x.a.div(rt||(rt=Object(i.a)(["\n    a {\n        color: #555;\n        font-size: 0.7em;\n    }\n"]))),ut=(n(159),n(96)),lt=n(5);function pt(t){return ft.apply(this,arguments)}function ft(){return(ft=Object(f.a)(p.a.mark((function t(e){var n,r,a,c,s,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api-testnet.ergoplatform.com/api/v0/assets/issuingBoxes");case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.next=8,L(e);case 8:a=t.sent,c=Object(u.a)(r.items),t.prev=10,c.s();case 12:if((s=c.n()).done){t.next=18;break}if((i=s.value).additionalRegisters.R8!=="0e20".concat(a)){t.next=16;break}return t.abrupt("return",i);case 16:t.next=12;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),c.e(t.t0);case 23:return t.prev=23,c.f(),t.finish(23);case 26:return t.abrupt("return",null);case 27:case"end":return t.stop()}}),t,null,[[10,20,23,26]])})))).apply(this,arguments)}function dt(t){return ht.apply(this,arguments)}function ht(){return(ht=Object(f.a)(p.a.mark((function t(e){var n,r,a,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api-testnet.ergoplatform.com/api/v0/transactions/".concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,console.log("getTransactionTime",r),a=r.summary.timestamp,c=r.outputs[0].assets[0].tokenId,t.abrupt("return",{timestamp:a,tokenId:c});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function bt(t){return jt.apply(this,arguments)}function jt(){return(jt=Object(f.a)(p.a.mark((function t(e){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api-testnet.ergoplatform.com/api/v0/addresses/assetHolders/".concat(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,console.log("getAssetHolders",r),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vt(){var t=Object(h.useState)([]),e=Object(d.a)(t,2),n=e[0],r=e[1],a=Object(h.useState)(null),c=Object(d.a)(a,2),s=c[0],i=c[1];return s?Object(y.jsxs)(V,{createUi:function(t){var e=t.createPdf;return Object(y.jsx)("button",{onClick:Object(f.a)(p.a.mark((function t(){var r,a,c,s,i,o,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=File,t.next=3,e();case 3:t.t1=t.sent,t.t2=[t.t1],r=new t.t0(t.t2,"certificate2.pdf"),a=new T.a,c=Object(u.a)(n);try{for(c.s();!(s=c.n()).done;)i=s.value,a.file(i.name,i)}catch(p){c.e(p)}finally{c.f()}return a.file(r.name,r),t.next=12,a.generateAsync({type:"blob"});case 12:return o=t.sent,t.next=15,L(o);case 15:l=t.sent,saveAs(o,"certificate2.".concat(l.substring(0,5),".zip"));case 17:case"end":return t.stop()}}),t)}))),children:"Create 2nd certificate"})},children:[Object(y.jsx)("b",{children:"txId:"})," ",s.txId,Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"timestamp:"})," ",s.timestamp,Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"tokenId:"})," ",s.tokenId,Object(y.jsx)("br",{}),Object(y.jsx)("b",{children:"hodlers:"})," ",s.hodlers.join(", ")]}):Object(y.jsxs)(mt,{children:[Object(y.jsx)(g,{onFiles:function(){var t=Object(f.a)(p.a.mark((function t(e){var n,a,c,s,u,l,f;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e[0],r([e[0]]),t.next=4,pt(n);case 4:return(a=t.sent)||alert("Your 1st certificate is still not validated through Ergo blockchain."),c=a.txId,t.next=9,dt(c);case 9:return s=t.sent,u=s.timestamp,l=s.tokenId,t.next=14,bt(l);case 14:f=t.sent,i(Object(o.a)(Object(o.a)({},a),{},{timestamp:u,tokenId:l,hodlers:f})),console.log(a);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),clickable:!0,children:"Upload your 1st certificate."}),Object(y.jsx)(at.a,{to:"/",target:"_blank",children:"Or create your 1st certificate."})]})}var mt=x.a.div(it||(it=Object(i.a)(["\n    a {\n        color: #555;\n        font-size: 0.7em;\n    }\n"]))),Ot=Object(ut.a)();s.a.render(Object(y.jsx)(b.a.StrictMode,{children:Object(y.jsx)(lt.b,{history:Ot,children:Object(y.jsxs)(lt.c,{children:[Object(y.jsx)(lt.a,{exact:!0,path:"/",children:Object(y.jsx)(st,{})}),Object(y.jsx)(lt.a,{exact:!0,path:"/verify",children:Object(y.jsx)(vt,{})})]})})}),document.getElementById("root"))}},[[160,1,3]]]);
//# sourceMappingURL=main.7e88ce8b.chunk.js.map